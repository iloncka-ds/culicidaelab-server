<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="CulicidaeLab Server: Webserver for Mosquito Research and Public Health Analysis"><meta name=author content="Ilona Kovaleva"><link href=https://iloncka-ds.github.io/culicidaelab-server/en/developer-guide/api-reference/prediction/ rel=canonical><link href=../geo/ rel=prev><link href=../observation/ rel=next><link rel=icon href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Prediction API - CulicidaeLab Server Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Merriweather Sans";--md-code-font:"Red Hat Mono"}</style><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta name=description content="CulicidaeLab Server: Webserver for Mosquito Research and Public Health Analysis"><meta name=keywords content="mosquito research, culicidae, species prediction, surveillance, data analysis, AI, machine learning"><meta name=author content=CulicidaeLab><meta name=robots content="index, follow"><meta property=og:type content=website><meta content=https://iloncka-ds.github.io/culicidaelab-server/en/developer-guide/api-reference/prediction/ property=og:url><meta property=og:title content="Prediction API - CulicidaeLab Server Documentation"><meta property=og:description content="CulicidaeLab Server: Webserver for Mosquito Research and Public Health Analysis"><meta property=og:image content=https://iloncka-ds.github.io/culicidaelab-server/en/assets/images/culicidaelab-social-card.png><meta property=og:site_name content="CulicidaeLab Server Documentation"><meta property=twitter:card content=summary_large_image><meta content=https://iloncka-ds.github.io/culicidaelab-server/en/developer-guide/api-reference/prediction/ property=twitter:url><meta property=twitter:title content="Prediction API - CulicidaeLab Server Documentation"><meta property=twitter:description content="CulicidaeLab Server: Webserver for Mosquito Research and Public Health Analysis"><meta property=twitter:image content=https://iloncka-ds.github.io/culicidaelab-server/en/assets/images/culicidaelab-social-card.png><meta property=twitter:site content=@culicidaelab><meta name=theme-color content=#009688><meta name=msapplication-TileColor content=#009688><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black-translucent><script type=application/ld+json>
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "CulicidaeLab Server Documentation",
    "description": "CulicidaeLab Server: Webserver for Mosquito Research and Public Health Analysis",
    "url": "https://iloncka-ds.github.io/culicidaelab-server/en/",
    "publisher": {
      "@type": "Organization",
      "name": "CulicidaeLab",
      "url": "https://culicidaelab.ru"
    }
  }
  </script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#prediction-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="CulicidaeLab Server Documentation" class="md-header__button md-logo" aria-label="CulicidaeLab Server Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> CulicidaeLab Server Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Prediction API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=teal aria-label type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=teal aria-label type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Select language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=https://iloncka-ds.github.io/culicidaelab-server/en hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=https://iloncka-ds.github.io/culicidaelab-server/ru hreflang=ru class=md-select__link> Русский </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/iloncka-ds/culicidaelab-server title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../getting-started/installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../user-guide/overview/ class=md-tabs__link> User Guide </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../architecture/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../../deployment/production/ class=md-tabs__link> Deployment </a> </li> <li class=md-tabs__item> <a href=../../../research/data-models/ class=md-tabs__link> Research </a> </li> <li class=md-tabs__item> <a href=../../../reference/api/ class=md-tabs__link> Reference </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="CulicidaeLab Server Documentation" class="md-nav__button md-logo" aria-label="CulicidaeLab Server Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> CulicidaeLab Server Documentation </label> <div class=md-nav__source> <a href=https://github.com/iloncka-ds/culicidaelab-server title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/species-prediction/ class=md-nav__link> <span class=md-ellipsis> Species Prediction </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/map-visualization/ class=md-nav__link> <span class=md-ellipsis> Map Visualization </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/species-database/ class=md-nav__link> <span class=md-ellipsis> Species Database </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/diseases-database/ class=md-nav__link> <span class=md-ellipsis> Diseases Database </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/data-management/ class=md-nav__link> <span class=md-ellipsis> Data Management </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../openapi/ class=md-nav__link> <span class=md-ellipsis> OpenAPI Integration </span> </a> </li> <li class=md-nav__item> <a href=../species/ class=md-nav__link> <span class=md-ellipsis> Species API </span> </a> </li> <li class=md-nav__item> <a href=../diseases/ class=md-nav__link> <span class=md-ellipsis> Diseases API </span> </a> </li> <li class=md-nav__item> <a href=../geo/ class=md-nav__link> <span class=md-ellipsis> Geographic API </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Prediction API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Prediction API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#router-implementation class=md-nav__link> <span class=md-ellipsis> Router Implementation </span> </a> <nav class=md-nav aria-label="Router Implementation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.routers.prediction--now-available-at-post-apiv1predict class=md-nav__link> <span class=md-ellipsis> Now available at POST /api/v1/predict </span> </a> </li> <li class=md-nav__item> <a href=#backend.routers.prediction.prediction_service class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;prediction_service </span> </a> </li> <li class=md-nav__item> <a href=#backend.routers.prediction.PredictionResult class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PredictionResult </span> </a> <nav class=md-nav aria-label= PredictionResult> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.routers.prediction.PredictionResult.model_config class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;model_config </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#backend.routers.prediction.predict_species class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;predict_species </span> </a> <nav class=md-nav aria-label= predict_species> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.routers.prediction.predict_species--using-curl-command class=md-nav__link> <span class=md-ellipsis> Using curl command: </span> </a> </li> <li class=md-nav__item> <a href=#backend.routers.prediction.predict_species--curl-x-post-httplocalhost8000predict-h-accept-applicationjson-h-content-type-multipartform-data-f-filemosquito_imagejpg class=md-nav__link> <span class=md-ellipsis> curl -X POST "http://localhost:8000/predict" &gt;&gt;&gt; # -H "accept: application/json" &gt;&gt;&gt; # -H "Content-Type: multipart/form-data" &gt;&gt;&gt; # -F "file=@mosquito_image.jpg" </span> </a> </li> <li class=md-nav__item> <a href=#backend.routers.prediction.predict_species--using-python-requests class=md-nav__link> <span class=md-ellipsis> Using Python requests: </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-schemas class=md-nav__link> <span class=md-ellipsis> Data Schemas </span> </a> <nav class=md-nav aria-label="Data Schemas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.schemas.prediction_schemas class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;prediction_schemas </span> </a> <nav class=md-nav aria-label= prediction_schemas> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.schemas.prediction_schemas.annotations class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;annotations </span> </a> </li> <li class=md-nav__item> <a href=#backend.schemas.prediction_schemas.PredictionResult class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PredictionResult </span> </a> <nav class=md-nav aria-label= PredictionResult> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.schemas.prediction_schemas.PredictionResult.model_config class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;model_config </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#service-layer class=md-nav__link> <span class=md-ellipsis> Service Layer </span> </a> <nav class=md-nav aria-label="Service Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.services.prediction_service class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;prediction_service </span> </a> <nav class=md-nav aria-label= prediction_service> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.services.prediction_service.annotations class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;annotations </span> </a> </li> <li class=md-nav__item> <a href=#backend.services.prediction_service.app_settings class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;app_settings </span> </a> </li> <li class=md-nav__item> <a href=#backend.services.prediction_service.prediction_service class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;prediction_service </span> </a> </li> <li class=md-nav__item> <a href=#backend.services.prediction_service.PredictionService class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PredictionService </span> </a> <nav class=md-nav aria-label= PredictionService> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.services.prediction_service.PredictionService.save_predicted_image class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;save_predicted_image </span> </a> </li> <li class=md-nav__item> <a href=#backend.services.prediction_service.PredictionService.predict_species class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;predict_species </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#backend.services.prediction_service.PredictionResult class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PredictionResult </span> </a> <nav class=md-nav aria-label= PredictionResult> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backend.services.prediction_service.PredictionResult.model_config class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;model_config </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-usage class=md-nav__link> <span class=md-ellipsis> Example Usage </span> </a> <nav class=md-nav aria-label="Example Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#species-prediction class=md-nav__link> <span class=md-ellipsis> Species Prediction </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../observation/ class=md-nav__link> <span class=md-ellipsis> Observation API </span> </a> </li> <li class=md-nav__item> <a href=../filters/ class=md-nav__link> <span class=md-ellipsis> Filters API </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../frontend-development/ class=md-nav__link> <span class=md-ellipsis> Frontend Development </span> </a> </li> <li class=md-nav__item> <a href=../../backend-development/ class=md-nav__link> <span class=md-ellipsis> Backend Development </span> </a> </li> <li class=md-nav__item> <a href=../../testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deployment/production/ class=md-nav__link> <span class=md-ellipsis> Production </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Research </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../research/data-models/ class=md-nav__link> <span class=md-ellipsis> Data Models </span> </a> </li> <li class=md-nav__item> <a href=../../../research/ai-models/ class=md-nav__link> <span class=md-ellipsis> AI Models </span> </a> </li> <li class=md-nav__item> <a href=../../../research/datasets/ class=md-nav__link> <span class=md-ellipsis> Datasets </span> </a> </li> <li class=md-nav__item> <a href=../../../research/ecosystem/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/api/ class=md-nav__link> <span class=md-ellipsis> API </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/glossary/ class=md-nav__link> <span class=md-ellipsis> Glossary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=prediction-api>Prediction API<a class=headerlink href=#prediction-api title="Permanent link">&para;</a></h1> <p>The Prediction API provides machine learning-based species identification and prediction services for mosquito classification.</p> <h2 id=router-implementation>Router Implementation<a class=headerlink href=#router-implementation title="Permanent link">&para;</a></h2> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <p>Prediction router for mosquito species identification.</p> <p>This module provides FastAPI endpoints for predicting mosquito species from uploaded images using AI-powered classification. The router handles image validation, coordinates with the prediction service, and returns structured results.</p> <details class=main-components open> <summary>Main Components</summary> <ul> <li>APIRouter instance configured for prediction endpoints</li> <li>predict_species endpoint for species identification</li> </ul> </details> <details class=the-prediction-system-supports open> <summary>The prediction system supports</summary> <ul> <li>Multiple image formats (JPEG, PNG, etc.)</li> <li>Real-time species identification with confidence scores</li> <li>Optional image saving for predicted results</li> <li>Comprehensive error handling and logging</li> </ul> </details> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>from fastapi import FastAPI from backend.routers.prediction import router</p> <p>app = FastAPI() app.include_router(router, prefix="/api/v1")</p> <h4 id=backend.routers.prediction--now-available-at-post-apiv1predict>Now available at POST /api/v1/predict<a class=headerlink href=#backend.routers.prediction--now-available-at-post-apiv1predict title="Permanent link">&para;</a></h4> </blockquote> </blockquote> </blockquote> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h4 id=backend.routers.prediction.prediction_service class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>prediction_service</span> <span class=o>=</span> <span class=o>&lt;</span><span class=n>backend</span><span class=o>.</span><span class=n>services</span><span class=o>.</span><span class=n>prediction_service</span><span class=o>.</span><span class=n>PredictionService</span> <span class=nb>object</span> <span class=n>at</span> <span class=mh>0x00000274A9218790</span><span class=o>&gt;</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a href=#backend.routers.prediction.prediction_service class=headerlink title="Permanent link">&para;</a></h4> <div class="doc doc-contents "> <p>Service for mosquito species prediction using the CulicidaeLab <code>serve</code> API.</p> <p>This class provides a high-level interface for species identification from images. It is optimized for production use, leveraging an efficient inference backend with automatic model caching to ensure low latency.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=backend.routers.prediction.prediction_service.save_predicted_images_enabled>save_predicted_images_enabled</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/functions.html#bool>bool</a></code> </td> <td> <div class=doc-md-description> <p>Whether to save predicted images.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.routers.prediction.prediction_service.model_id>model_id</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>The identifier for the machine learning model being used.</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>service = PredictionService() result, error = await service.predict_species(image_data, "test.jpg")</p> </blockquote> </blockquote> </blockquote> </details> </div> </div> <div class="doc doc-object doc-class"> <h4 id=backend.routers.prediction.PredictionResult class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <code>PredictionResult</code> <a href=#backend.routers.prediction.PredictionResult class=headerlink title="Permanent link">&para;</a></h4> <div class="doc doc-contents "> <p>Model for prediction results.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=backend.routers.prediction.PredictionResult.model_config class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>model_config</span> <span class=o>=</span> <span class=p>{}</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> </span> <a href=#backend.routers.prediction.PredictionResult.model_config class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> <p>dict() -&gt; new empty dictionary dict(mapping) -&gt; new dictionary initialized from a mapping object's (key, value) pairs dict(iterable) -&gt; new dictionary initialized as if via: d = {} for k, v in iterable: d[k] = v dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs in the keyword argument list. For example: dict(one=1, two=2)</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h4 id=backend.routers.prediction.predict_species class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-function"></code> <code class="highlight language-python"><span class=n>predict_species</span><span class=p>(</span><span class=n>file</span><span class=p>:</span> <span class=n>UploadFile</span> <span class=o>=</span> <span class=n>File</span><span class=p>(</span><span class=n>PydanticUndefined</span><span class=p>))</span> <span class=o>-&gt;</span> <span class=n>PredictionResult</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> <a href=#backend.routers.prediction.predict_species class=headerlink title="Permanent link">&para;</a></h4> <div class="doc doc-contents "> <p>Predict mosquito species from an uploaded image.</p> <p>This endpoint accepts an image file and uses AI-powered classification to identify the mosquito species. The prediction includes confidence scores and optional species information.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>file</code> </td> <td> <code><a class="autorefs autorefs-external" title=fastapi.datastructures.UploadFile href=https://fastapi.tiangolo.com/reference/uploadfile/#fastapi.UploadFile>UploadFile</a></code> </td> <td> <div class=doc-md-description> <p>The image file to analyze. Must be a valid image format (JPEG, PNG, etc.). The file is validated for content type and non-empty content.</p> </div> </td> <td> <code>File(PydanticUndefined)</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>PredictionResult</code></td> <td> <code><a class="autorefs autorefs-internal" title="            PredictionResult (backend.schemas.prediction_schemas.PredictionResult)" href=#backend.schemas.prediction_schemas.PredictionResult>PredictionResult</a></code> </td> <td> <div class=doc-md-description> <p>A structured response containing: - id: Species identifier (lowercase with underscores) - scientific_name: The predicted species name - probabilities: Dictionary of species -&gt; confidence scores - model_id: Identifier of the AI model used - confidence: Confidence score of the top prediction - image_url_species: URL to processed image (if saving enabled)</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title=fastapi.exceptions.HTTPException href=https://fastapi.tiangolo.com/reference/exceptions/#fastapi.HTTPException>HTTPException</a></code> </td> <td> <div class=doc-md-description> <p>If the file is not an image (400 Bad Request)</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title=fastapi.exceptions.HTTPException href=https://fastapi.tiangolo.com/reference/exceptions/#fastapi.HTTPException>HTTPException</a></code> </td> <td> <div class=doc-md-description> <p>If the file is empty (400 Bad Request)</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title=fastapi.exceptions.HTTPException href=https://fastapi.tiangolo.com/reference/exceptions/#fastapi.HTTPException>HTTPException</a></code> </td> <td> <div class=doc-md-description> <p>If prediction fails (500 Internal Server Error)</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>import requests</p> <h5 id=backend.routers.prediction.predict_species--using-curl-command>Using curl command:<a class=headerlink href=#backend.routers.prediction.predict_species--using-curl-command title="Permanent link">&para;</a></h5> <h5 id=backend.routers.prediction.predict_species--curl-x-post-httplocalhost8000predict-h-accept-applicationjson-h-content-type-multipartform-data-f-filemosquito_imagejpg>curl -X POST "<a href=http://localhost:8000/predict>http://localhost:8000/predict</a>" &gt;&gt;&gt; # -H "accept: application/json" &gt;&gt;&gt; # -H "Content-Type: multipart/form-data" &gt;&gt;&gt; # -F "file=<a class="magiclink magiclink-github magiclink-mention" href=https://github.com/mosquito_image title="GitHub User: mosquito_image">@mosquito_image</a>.jpg"<a class=headerlink href=#backend.routers.prediction.predict_species--curl-x-post-httplocalhost8000predict-h-accept-applicationjson-h-content-type-multipartform-data-f-filemosquito_imagejpg title="Permanent link">&para;</a></h5> <h5 id=backend.routers.prediction.predict_species--using-python-requests>Using Python requests:<a class=headerlink href=#backend.routers.prediction.predict_species--using-python-requests title="Permanent link">&para;</a></h5> <p>response = requests.post( ... "<a href=http://localhost:8000/predict>http://localhost:8000/predict</a>", ... files={"file": open("mosquito_image.jpg", "rb")} ... ) result = response.json() print(f"Predicted species: {result['scientific_name']}") print(f"Confidence: {result['confidence']:.2%}")</p> </blockquote> </blockquote> </blockquote> </details> <details class=quote> <summary>Source code in <code>backend\routers\prediction.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=nd>@router</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>    <span class=s2>&quot;/predict&quot;</span><span class=p>,</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>    <span class=n>response_model</span><span class=o>=</span><span class=n>PredictionResult</span><span class=p>,</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=n>summary</span><span class=o>=</span><span class=s2>&quot;Predict mosquito species from image&quot;</span><span class=p>,</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Upload an image of a mosquito to identify its species using AI.&quot;</span><span class=p>,</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=p>)</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>predict_species</span><span class=p>(</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=n>file</span><span class=p>:</span> <span class=n>UploadFile</span> <span class=o>=</span> <span class=n>File</span><span class=p>(</span><span class=o>...</span><span class=p>),</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PredictionResult</span><span class=p>:</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Predict mosquito species from an uploaded image.</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>    This endpoint accepts an image file and uses AI-powered classification</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=sd>    to identify the mosquito species. The prediction includes confidence scores</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=sd>    and optional species information.</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=sd>    Args:</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=sd>        file (UploadFile): The image file to analyze. Must be a valid image</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a><span class=sd>            format (JPEG, PNG, etc.). The file is validated for content type</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=sd>            and non-empty content.</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>    Returns:</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>        PredictionResult: A structured response containing:</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>            - id: Species identifier (lowercase with underscores)</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>            - scientific_name: The predicted species name</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>            - probabilities: Dictionary of species -&gt; confidence scores</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>            - model_id: Identifier of the AI model used</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=sd>            - confidence: Confidence score of the top prediction</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=sd>            - image_url_species: URL to processed image (if saving enabled)</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=sd>    Raises:</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=sd>        HTTPException: If the file is not an image (400 Bad Request)</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=sd>        HTTPException: If the file is empty (400 Bad Request)</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a><span class=sd>        HTTPException: If prediction fails (500 Internal Server Error)</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=sd>    Example:</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a><span class=sd>        &gt;&gt;&gt; import requests</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a><span class=sd>        &gt;&gt;&gt;</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=sd>        &gt;&gt;&gt; # Using curl command:</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=sd>        &gt;&gt;&gt; # curl -X POST &quot;http://localhost:8000/predict&quot; \</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=sd>        &gt;&gt;&gt; #      -H &quot;accept: application/json&quot; \</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><span class=sd>        &gt;&gt;&gt; #      -H &quot;Content-Type: multipart/form-data&quot; \</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=sd>        &gt;&gt;&gt; #      -F &quot;file=@mosquito_image.jpg&quot;</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>        &gt;&gt;&gt;</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>        &gt;&gt;&gt; # Using Python requests:</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><span class=sd>        &gt;&gt;&gt; response = requests.post(</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a><span class=sd>        ...     &quot;http://localhost:8000/predict&quot;,</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=sd>        ...     files={&quot;file&quot;: open(&quot;mosquito_image.jpg&quot;, &quot;rb&quot;)}</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a><span class=sd>        ... )</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=sd>        &gt;&gt;&gt; result = response.json()</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=sd>        &gt;&gt;&gt; print(f&quot;Predicted species: {result[&#39;scientific_name&#39;]}&quot;)</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=sd>        &gt;&gt;&gt; print(f&quot;Confidence: {result[&#39;confidence&#39;]:.2%}&quot;)</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>--- [ROUTER] Received request for /predict ---&quot;</span><span class=p>)</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=n>content_type</span> <span class=o>=</span> <span class=n>file</span><span class=o>.</span><span class=n>content_type</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[ROUTER] File received. Filename: &#39;</span><span class=si>{</span><span class=n>file</span><span class=o>.</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#39;, Content-Type: &#39;</span><span class=si>{</span><span class=n>content_type</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>content_type</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>content_type</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;image/&quot;</span><span class=p>):</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] ERROR: Invalid content type. Raising 400 Bad Request.&quot;</span><span class=p>)</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>            <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>                <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>,</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>                <span class=n>detail</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;File must be an image, got </span><span class=si>{</span><span class=n>content_type</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>            <span class=p>)</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] Reading file contents...&quot;</span><span class=p>)</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>        <span class=n>contents</span> <span class=o>=</span> <span class=k>await</span> <span class=n>file</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>contents</span><span class=p>:</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] ERROR: Empty file uploaded. Raising 400 Bad Request.&quot;</span><span class=p>)</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>            <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=s2>&quot;Empty file&quot;</span><span class=p>)</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] File contents read ({len(contents)} bytes). Calling prediction_service...&quot;</span><span class=p>)</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>        <span class=n>result</span><span class=p>,</span> <span class=n>error</span> <span class=o>=</span> <span class=k>await</span> <span class=n>prediction_service</span><span class=o>.</span><span class=n>predict_species</span><span class=p>(</span><span class=n>contents</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>filename</span><span class=p>)</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] Prediction service returned. Result: {result is not None}, Error: &#39;</span><span class=si>{error}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>        <span class=k>if</span> <span class=n>error</span><span class=p>:</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] ERROR: Prediction service returned an error. Raising 500 Internal Server Error.&quot;</span><span class=p>)</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>            <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_500_INTERNAL_SERVER_ERROR</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Prediction failed: </span><span class=si>{</span><span class=n>error</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>result</span><span class=p>:</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;[ROUTER] ERROR: Prediction service returned no result and no error. Raising 500.&quot;</span><span class=p>)</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>            <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>                <span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_500_INTERNAL_SERVER_ERROR</span><span class=p>,</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>                <span class=n>detail</span><span class=o>=</span><span class=s2>&quot;Prediction failed with no specific error&quot;</span><span class=p>,</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>            <span class=p>)</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[ROUTER] Prediction successful. Returning result for &#39;</span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>scientific_name</span><span class=si>}</span><span class=s2>&#39;.&quot;</span><span class=p>)</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=k>return</span> <span class=n>result</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=k>except</span> <span class=n>HTTPException</span> <span class=k>as</span> <span class=n>http_exc</span><span class=p>:</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=c1># Re-raise HTTPExceptions to let FastAPI handle them</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[ROUTER] Caught HTTPException: </span><span class=si>{</span><span class=n>http_exc</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>http_exc</span><span class=o>.</span><span class=n>detail</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=k>raise</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=c1># Catch any other unexpected errors</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[ROUTER] CRITICAL ERROR in /predict: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_500_INTERNAL_SERVER_ERROR</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Prediction failed: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div><h2 id=data-schemas>Data Schemas<a class=headerlink href=#data-schemas title="Permanent link">&para;</a></h2> <p>The Prediction API uses Pydantic schemas for prediction request/response validation:</p> <div class="doc doc-object doc-module"> <h4 id=backend.schemas.prediction_schemas class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <code>backend.schemas.prediction_schemas</code> <a href=#backend.schemas.prediction_schemas class=headerlink title="Permanent link">&para;</a></h4> <div class="doc doc-contents first"> <p>Pydantic models for the Prediction service.</p> <p>This module defines the schema models used for prediction results and model validation in API endpoints.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=backend.schemas.prediction_schemas.annotations class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>annotations</span> <span class=o>=</span> <span class=n>_Feature</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;beta&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=kc>None</span><span class=p>,</span> <span class=mi>16777216</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a href=#backend.schemas.prediction_schemas.annotations class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-class"> <h5 id=backend.schemas.prediction_schemas.PredictionResult class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <code>PredictionResult</code> <a href=#backend.schemas.prediction_schemas.PredictionResult class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> <p>Model for prediction results.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h6 id=backend.schemas.prediction_schemas.PredictionResult.model_config class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>model_config</span> <span class=o>=</span> <span class=p>{}</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> </span> <a href=#backend.schemas.prediction_schemas.PredictionResult.model_config class=headerlink title="Permanent link">&para;</a></h6> <div class="doc doc-contents "> <p>dict() -&gt; new empty dictionary dict(mapping) -&gt; new dictionary initialized from a mapping object's (key, value) pairs dict(iterable) -&gt; new dictionary initialized as if via: d = {} for k, v in iterable: d[k] = v dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs in the keyword argument list. For example: dict(one=1, two=2)</p> </div> </div> </div> </div> </div> </div> </div> </div><h2 id=service-layer>Service Layer<a class=headerlink href=#service-layer title="Permanent link">&para;</a></h2> <p>The Prediction API integrates with machine learning service layers:</p> <div class="doc doc-object doc-module"> <h4 id=backend.services.prediction_service class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <code>backend.services.prediction_service</code> <a href=#backend.services.prediction_service class=headerlink title="Permanent link">&para;</a></h4> <div class="doc doc-contents first"> <p>Machine learning prediction service for mosquito species identification.</p> <p>This module provides functionality for predicting mosquito species from images using a trained MosquitoClassifier model. It handles model loading, image processing, and prediction with confidence scoring and species identification.</p> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>from backend.services.prediction_service import prediction_service result, error = await prediction_service.predict_species(image_data, "mosquito.jpg") if result: ... print(f"Predicted species: {result.scientific_name}")</p> </blockquote> </blockquote> </blockquote> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h5 id=backend.services.prediction_service.annotations class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>annotations</span> <span class=o>=</span> <span class=n>_Feature</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;beta&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=kc>None</span><span class=p>,</span> <span class=mi>16777216</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a href=#backend.services.prediction_service.annotations class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=backend.services.prediction_service.app_settings class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>app_settings</span> <span class=o>=</span> <span class=n>AppSettings</span><span class=p>(</span><span class=n>APP_NAME</span><span class=o>=</span><span class=s1>&#39;CulicidaeLab API&#39;</span><span class=p>,</span> <span class=n>API_V1_STR</span><span class=o>=</span><span class=s1>&#39;/api&#39;</span><span class=p>,</span> <span class=n>DATABASE_PATH</span><span class=o>=</span><span class=s1>&#39;backend/data/.lancedb&#39;</span><span class=p>,</span> <span class=n>SAVE_PREDICTED_IMAGES</span><span class=o>=</span><span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=n>BACKEND_CORS_ORIGINS</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;http://localhost:8765&#39;</span><span class=p>,</span> <span class=s1>&#39;http://127.0.0.1:8765&#39;</span><span class=p>])</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a href=#backend.services.prediction_service.app_settings class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> <p>Application settings configuration for CulicidaeLab API backend.</p> <p>This class defines all configuration parameters for the CulicidaeLab API server, using Pydantic BaseSettings for environment variable support and validation. Settings can be overridden via environment variables with the CULICIDAELAB_ prefix.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.app_settings.APP_NAME>APP_NAME</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>Name of the application displayed in API documentation.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.app_settings.API_V1_STR>API_V1_STR</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>Base path prefix for API version 1 endpoints.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.app_settings.DATABASE_PATH>DATABASE_PATH</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>File system path to the LanceDB database directory.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.app_settings.SAVE_PREDICTED_IMAGES>SAVE_PREDICTED_IMAGES</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a> | <a class="autorefs autorefs-external" href=https://docs.python.org/3/library/functions.html#bool>bool</a></code> </td> <td> <div class=doc-md-description> <p>Whether to save predicted images to disk.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.app_settings.BACKEND_CORS_ORIGINS>BACKEND_CORS_ORIGINS</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#list>list</a>[<a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a>]</code> </td> <td> <div class=doc-md-description> <p>List of allowed CORS origins for frontend access.</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>settings = AppSettings() print(f"App name: {settings.APP_NAME}") App name: CulicidaeLab API print(f"Database path: {settings.DATABASE_PATH}") Database path: .lancedb</p> </blockquote> </blockquote> </blockquote> </details> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=backend.services.prediction_service.prediction_service class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>prediction_service</span> <span class=o>=</span> <span class=o>&lt;</span><span class=n>backend</span><span class=o>.</span><span class=n>services</span><span class=o>.</span><span class=n>prediction_service</span><span class=o>.</span><span class=n>PredictionService</span> <span class=nb>object</span> <span class=n>at</span> <span class=mh>0x00000274A9218790</span><span class=o>&gt;</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a href=#backend.services.prediction_service.prediction_service class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> <p>Service for mosquito species prediction using the CulicidaeLab <code>serve</code> API.</p> <p>This class provides a high-level interface for species identification from images. It is optimized for production use, leveraging an efficient inference backend with automatic model caching to ensure low latency.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.prediction_service.save_predicted_images_enabled>save_predicted_images_enabled</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/functions.html#bool>bool</a></code> </td> <td> <div class=doc-md-description> <p>Whether to save predicted images.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.prediction_service.model_id>model_id</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>The identifier for the machine learning model being used.</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>service = PredictionService() result, error = await service.predict_species(image_data, "test.jpg")</p> </blockquote> </blockquote> </blockquote> </details> </div> </div> <div class="doc doc-object doc-class"> <h5 id=backend.services.prediction_service.PredictionService class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <code class="highlight language-python"><span class=n>PredictionService</span><span class=p>()</span></code> <a href=#backend.services.prediction_service.PredictionService class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> <p>Service for mosquito species prediction using the CulicidaeLab <code>serve</code> API.</p> <p>This class provides a high-level interface for species identification from images. It is optimized for production use, leveraging an efficient inference backend with automatic model caching to ensure low latency.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.PredictionService.save_predicted_images_enabled>save_predicted_images_enabled</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/functions.html#bool>bool</a></code> </td> <td> <div class=doc-md-description> <p>Whether to save predicted images.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title=backend.services.prediction_service.PredictionService.model_id>model_id</span></code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>The identifier for the machine learning model being used.</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>service = PredictionService() result, error = await service.predict_species(image_data, "test.jpg")</p> </blockquote> </blockquote> </blockquote> </details> <p>Initialize the PredictionService and retrieve the model configuration.</p> <p>Sets up the service based on application settings and fetches the model architecture information from the CulicidaeLab library settings to generate a descriptive model ID.</p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h6 id=backend.services.prediction_service.PredictionService.save_predicted_image class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <code class="highlight language-python"><span class=n>save_predicted_image</span><span class=p>(</span><span class=n>image_data</span><span class=p>:</span> <span class=nb>bytes</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>quiet</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span></code> <a href=#backend.services.prediction_service.PredictionService.save_predicted_image class=headerlink title="Permanent link">&para;</a></h6> <div class="doc doc-contents "> <p>Asynchronously save the predicted image in multiple sizes.</p> <p>This method saves the original image along with resized versions (224x224 and 100x100) to the static images directory. Failures are handled silently to not disrupt the prediction flow unless quiet mode is disabled.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>image_data</code> </td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#bytes>bytes</a></code> </td> <td> <div class=doc-md-description> <p>The raw image data to save.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>filename</code> </td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>The filename to use for the saved images.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>quiet</code> </td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/functions.html#bool>bool</a></code> </td> <td> <div class=doc-md-description> <p>If False, exceptions will be raised instead of being handled silently. Defaults to True.</p> </div> </td> <td> <code>True</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/exceptions.html#Exception>Exception</a></code> </td> <td> <div class=doc-md-description> <p>If quiet=False and an error occurs during image saving, the original exception is re-raised.</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>service = PredictionService() await service.save_predicted_image(image_bytes, "mosquito_001.jpg")</p> </blockquote> </blockquote> </blockquote> </details> </div> </div> <div class="doc doc-object doc-function"> <h6 id=backend.services.prediction_service.PredictionService.predict_species class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <code class="highlight language-python"><span class=n>predict_species</span><span class=p>(</span><span class=n>image_data</span><span class=p>:</span> <span class=nb>bytes</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>tuple</span><span class=p>[</span><span class=n>PredictionResult</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>]</span></code> <a href=#backend.services.prediction_service.PredictionService.predict_species class=headerlink title="Permanent link">&para;</a></h6> <div class="doc doc-contents "> <p>Predict mosquito species from image data using the <code>serve</code> API.</p> <p>This method processes image data using the high-performance <code>serve</code> function. It translates the library's output into the backend's <code>PredictionResult</code> schema, including the correct model ID.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>image_data</code> </td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#bytes>bytes</a></code> </td> <td> <div class=doc-md-description> <p>The raw image data (e.g., JPEG, PNG).</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>filename</code> </td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p>The original filename of the image.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="            PredictionResult (backend.schemas.prediction_schemas.PredictionResult)" href=#backend.schemas.prediction_schemas.PredictionResult>PredictionResult</a> | None</code> </td> <td> <div class=doc-md-description> <p>A tuple containing the <code>PredictionResult</code> or None, and an error</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a> | None</code> </td> <td> <div class=doc-md-description> <p>message or None.</p> </div> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h5 id=backend.services.prediction_service.PredictionResult class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <code>PredictionResult</code> <a href=#backend.services.prediction_service.PredictionResult class=headerlink title="Permanent link">&para;</a></h5> <div class="doc doc-contents "> <p>Model for prediction results.</p> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h6 id=backend.services.prediction_service.PredictionResult.model_config class="doc doc-heading"> <code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <code class="highlight language-python"><span class=n>model_config</span> <span class=o>=</span> <span class=p>{}</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> </span> <a href=#backend.services.prediction_service.PredictionResult.model_config class=headerlink title="Permanent link">&para;</a></h6> <div class="doc doc-contents "> <p>dict() -&gt; new empty dictionary dict(mapping) -&gt; new dictionary initialized from a mapping object's (key, value) pairs dict(iterable) -&gt; new dictionary initialized as if via: d = {} for k, v in iterable: d[k] = v dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs in the keyword argument list. For example: dict(one=1, two=2)</p> </div> </div> </div> </div> </div> </div> </div> </div><h2 id=example-usage>Example Usage<a class=headerlink href=#example-usage title="Permanent link">&para;</a></h2> <h3 id=species-prediction>Species Prediction<a class=headerlink href=#species-prediction title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>import</span><span class=w> </span><span class=nn>httpx</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=k>async</span> <span class=k>with</span> <span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span><span class=p>()</span> <span class=k>as</span> <span class=n>client</span><span class=p>:</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=c1># Upload image for species prediction</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;mosquito_image.jpg&quot;</span><span class=p>,</span> <span class=s2>&quot;rb&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>image_file</span><span class=p>:</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>        <span class=n>files</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;image&quot;</span><span class=p>:</span> <span class=n>image_file</span><span class=p>}</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>        <span class=n>response</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>            <span class=s2>&quot;http://localhost:8000/api/v1/predict&quot;</span><span class=p>,</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>            <span class=n>files</span><span class=o>=</span><span class=n>files</span><span class=p>,</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>            <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;confidence_threshold&quot;</span><span class=p>:</span> <span class=mf>0.7</span><span class=p>}</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>        <span class=p>)</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>        <span class=n>prediction</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Predicted species: </span><span class=si>{</span><span class=n>prediction</span><span class=p>[</span><span class=s1>&#39;species&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Confidence: </span><span class=si>{</span><span class=n>prediction</span><span class=p>[</span><span class=s1>&#39;confidence&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 16, 2025 18:51:11 UTC"><span class=timeago datetime=2025-10-16T18:51:11+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 16, 2025 18:51:11 UTC">2025-10-16</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 7, 2025 20:49:35 UTC"><span class=timeago datetime=2025-10-07T20:49:35+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 7, 2025 20:49:35 UTC">2025-10-07</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../geo/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Geographic API" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Geographic API </div> </div> </a> <a href=../observation/ class="md-footer__link md-footer__link--next" aria-label="Next: Observation API" rel=next> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Observation API </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer__brand> <div class=md-footer__logo> <span class=md-footer__brand-text>CulicidaeLab</span> </div> <p class=md-footer__tagline> Advancing mosquito research through innovative technology and data analysis </p> </div> <div class=md-footer__links> <div class=md-footer__links-column> <h4>Documentation</h4> <ul> <li><a href=../../../getting-started/ >Getting Started</a></li> <li><a href=../../ >Developer Guide</a></li> <li><a href=../../../user-guide/ >User Guide</a></li> <li><a href=../../../reference/api/ >API Reference</a></li> </ul> </div> <div class=md-footer__links-column> <h4>Community</h4> <ul> <li><a href=https://github.com/iloncka-ds/culicidaelab-server target=_blank rel=noopener>GitHub</a></li> <li><a href=https://github.com/iloncka-ds/culicidaelab-server/issues target=_blank rel=noopener>Report Issues</a></li> <li><a href=https://github.com/iloncka-ds/culicidaelab-server/discussions target=_blank rel=noopener>Discussions</a></li> <li><a href=mailto:culicidaelab@gmail.com>Contact</a></li> </ul> </div> <div class=md-footer__links-column> <h4>Resources</h4> <ul> <li><a href=https://culicidaelab.ru target=_blank rel=noopener>CulicidaeLab Website</a></li> <li><a href=../../../research/datasets/ >Datasets</a></li> <li><a href=../../../reference/changelog/ >Changelog</a></li> <li><a href=../../../reference/glossary/ >Glossary</a></li> </ul> </div> </div> <div class=md-footer__bottom> <div class=md-footer__copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2025 Kovaleva Ilona </div> <div class=md-footer__version> Documentation built with <a href=https://www.mkdocs.org/ target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener>Material for MkDocs</a> </div> </div> <div class=md-footer__social> <a href=https://github.com/iloncka-ds/culicidaelab-server target=_blank rel=noopener title="GitHub Repository" class=md-footer__social-link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=mailto:culicidaelab@gmail.com target=_blank rel=noopener title="Contact Us" class=md-footer__social-link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg> </a> <a href=https://github.com/culicidaelab/culicidaelab-server target=_blank rel=noopener title="CulicidaeLab Website" class=md-footer__social-link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["search.suggest", "search.highlight", "navigation.path", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.sections", "navigation.expand", "toc.follow", "toc.integrate", "content.code.annotate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> <script src=../../../javascripts/navigation-enhancements.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>